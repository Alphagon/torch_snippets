---

title: Rich Logging and Printing


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/logging.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/logging.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_console" class="doc_header"><code>get_console</code><a href="https://github.com/sizhky/torch_snippets/tree/master/torch_snippets/logger.py#L10" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_console</code>(<strong><code>width</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The Number is 128&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span> <span class="s1">&#39;lskjdf&#39;</span><span class="p">,</span> <span class="p">],</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span> <span class="s1">&#39;lskjdf&#39;</span><span class="p">,</span> <span class="p">],</span> <span class="s1">&#39;ae&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bf&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span> <span class="s1">&#39;lskjdf&#39;</span><span class="p">,</span> <span class="p">],</span> <span class="s1">&#39;ag&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ba&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span> <span class="s1">&#39;lskjdf&#39;</span><span class="p">,</span> <span class="p">]})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">The Number is <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">128</span>
</pre>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold">{</span>
    <span style="color: #008000; text-decoration-color: #008000">'a'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>,
    <span style="color: #008000; text-decoration-color: #008000">'b'</span>: <span style="font-weight: bold">[{</span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span><span style="font-weight: bold">}</span>, <span style="color: #008000; text-decoration-color: #008000">'lskjdf'</span><span style="font-weight: bold">]</span>,
    <span style="color: #008000; text-decoration-color: #008000">'c'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>,
    <span style="color: #008000; text-decoration-color: #008000">'d'</span>: <span style="font-weight: bold">[{</span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span><span style="font-weight: bold">}</span>, <span style="color: #008000; text-decoration-color: #008000">'lskjdf'</span><span style="font-weight: bold">]</span>,
    <span style="color: #008000; text-decoration-color: #008000">'ae'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>,
    <span style="color: #008000; text-decoration-color: #008000">'bf'</span>: <span style="font-weight: bold">[{</span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span><span style="font-weight: bold">}</span>, <span style="color: #008000; text-decoration-color: #008000">'lskjdf'</span><span style="font-weight: bold">]</span>,
    <span style="color: #008000; text-decoration-color: #008000">'ag'</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>,
    <span style="color: #008000; text-decoration-color: #008000">'ba'</span>: <span style="font-weight: bold">[{</span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span>, <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span><span style="font-weight: bold">}</span>, <span style="color: #008000; text-decoration-color: #008000">'lskjdf'</span><span style="font-weight: bold">]</span>
<span style="font-weight: bold">}</span>
</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x86&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">\x86
</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="None" class="doc_header"><code>None</code><a href="" class="source_link" style="float:right">[source]</a></h4>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">1221</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">2342</span><span class="p">}</span>
<span class="k">del</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{2: 2342}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Debug</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
<span class="n">Info</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
<span class="n">Warn</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
<span class="n">Excep</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-05-27 19:39:58.862 | DEBUG    | __main__:&lt;module&gt;:1 - TESTING {1,2,3}
2021-05-27 19:39:58.864 | INFO     | __main__:&lt;module&gt;:2 - TESTING {1,2,3}
2021-05-27 19:39:58.865 | WARNING  | __main__:&lt;module&gt;:3 - TESTING {1,2,3}
2021-05-27 19:39:58.867 | ERROR    | __main__:&lt;module&gt;:4 - TESTING {1,2,3}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reset_logger_width" class="doc_header"><code>reset_logger_width</code><a href="https://github.com/sizhky/torch_snippets/tree/master/torch_snippets/logger.py#L73" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reset_logger_width</code>(<strong><code>logger</code></strong>, <strong><code>width</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Excep</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
<span class="n">reset_logger_width</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="mi">155</span><span class="p">)</span>
<span class="n">Excep</span><span class="p">(</span><span class="s1">&#39;TESTING {1,2,3}&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-05-27 19:39:58.883 | ERROR    | __main__:&lt;module&gt;:1 - TESTING {1,2,3}
2021-05-27 19:39:58.884 | ERROR    | __main__:&lt;module&gt;:3 - TESTING {1,2,3}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">enter_exit</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Logs when a function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger_</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">opt</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">function_timer</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">logger_</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Entered function `</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">`&#39;</span><span class="p">)</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">toc</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">logger_</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Exiting function `</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">` after </span><span class="si">{</span><span class="n">toc</span><span class="o">-</span><span class="n">tic</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">o</span>
    <span class="k">return</span> <span class="n">function_timer</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@enter_exit</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sleeping...&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>

<span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">23</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-05-27 19:39:58.906 | DEBUG    | __main__:&lt;module&gt;:7 - Entered function `add`
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">sleeping<span style="color: #808000; text-decoration-color: #808000">...</span>
</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-05-27 19:40:00.912 | DEBUG    | __main__:&lt;module&gt;:7 - Exiting function `add` after 2.005 seconds
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>24</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">traceback</span>
<span class="k">try</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_stack</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2021-05-27 19:40:09.795 | WARNING  | __main__:&lt;module&gt;:4 -   File &#34;/Users/yreddy31/anaconda3/lib/python3.7/runpy.py&#34;, line 193, in _run_module_as_main
    &#34;__main__&#34;, mod_spec)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/runpy.py&#34;, line 85, in _run_code
    exec(code, run_globals)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel_launcher.py&#34;, line 16, in &lt;module&gt;
    app.launch_new_instance()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/traitlets/config/application.py&#34;, line 664, in launch_instance
    app.start()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/kernelapp.py&#34;, line 563, in start
    self.io_loop.start()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/platform/asyncio.py&#34;, line 199, in start
    self.asyncio_loop.run_forever()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/asyncio/base_events.py&#34;, line 534, in run_forever
    self._run_once()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/asyncio/base_events.py&#34;, line 1771, in _run_once
    handle._run()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/asyncio/events.py&#34;, line 88, in _run
    self._context.run(self._callback, *self._args)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py&#34;, line 688, in &lt;lambda&gt;
    lambda f: self._run_callback(functools.partial(callback, future))
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/ioloop.py&#34;, line 741, in _run_callback
    ret = callback()
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/gen.py&#34;, line 814, in inner
    self.ctx_run(self.run)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/gen.py&#34;, line 775, in run
    yielded = self.gen.send(value)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/kernelbase.py&#34;, line 365, in process_one
    yield gen.maybe_future(dispatch(*args))
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/gen.py&#34;, line 234, in wrapper
    yielded = ctx_run(next, result)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/kernelbase.py&#34;, line 272, in dispatch_shell
    yield gen.maybe_future(handler(stream, idents, msg))
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/gen.py&#34;, line 234, in wrapper
    yielded = ctx_run(next, result)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/kernelbase.py&#34;, line 542, in execute_request
    user_expressions, allow_stdin,
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/tornado/gen.py&#34;, line 234, in wrapper
    yielded = ctx_run(next, result)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/ipkernel.py&#34;, line 294, in do_execute
    res = shell.run_cell(code, store_history=store_history, silent=silent)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/ipykernel/zmqshell.py&#34;, line 536, in run_cell
    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&#34;, line 2855, in run_cell
    raw_cell, store_history, silent, shell_futures)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&#34;, line 2881, in _run_cell
    return runner(coro)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/async_helpers.py&#34;, line 68, in _pseudo_sync_runner
    coro.send(None)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&#34;, line 3058, in run_cell_async
    interactivity=interactivity, compiler=compiler, result=result)
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&#34;, line 3249, in run_ast_nodes
    if (await self.run_code(code, result,  async_=asy)):
  File &#34;/Users/yreddy31/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&#34;, line 3326, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File &#34;&lt;ipython-input-12-d195e9978a9e&gt;&#34;, line 4, in &lt;module&gt;
    logger.warning(&#39;&#39;.join(traceback.format_stack()))

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>


